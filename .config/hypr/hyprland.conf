### Variables

# Alt as mod key
$mod = ALT

# Terminal emulator
$term = kitty

# Application launcher
$menu = fuzzel

### Input configuration
input {
    kb_layout = latam
    kb_options = numlock:enable
    follow_mouse = 0
    touchpad {
        natural_scroll = 1
        tap-to-click = 1
        disable_while_typing = 0
    }
}

### General settings
general {
    gaps_in = 0
    gaps_out = 0
    border_size = 2
    col.active_border = rgb(cba6f7)
    col.inactive_border = rgb(6c7086)
    layout = dwindle
}

### Decoration
decoration {
    rounding = 0
    blur {
        enabled = false
    }
    drop_shadow = false
}

### Animations
animations {
    enabled = false
}

### Startup
exec-once = ibus-daemon --xim --daemonize -r
# exec-once = ~/bin/bgchange_wayland  # TODO: Fix script to use Hyprland/wallpaper manager (currently uses swaymsg)
exec-once = wlsunset -l 10.5 -L -66.8 -T 5351 -t 2000 -g 0.95  # Removed -o eDP-1 to apply to all outputs
exec-once = dunst

### Key bindings

# Basics:
# Start a terminal
bind = $mod, Return, exec, $term

# Kill focused window
bind = $mod SHIFT, Q, killactive

# Start launcher
bind = $mod, D, exec, $menu

# Reload the configuration file
bind = $mod SHIFT, R, exec, hyprctl reload

# Exit Hyprland
bind = $mod SHIFT, E, exec, wlogout --protocol layer-shell
bind = $mod, End, exec, systemctl poweroff

# Moving around:
# Move focus around
bind = $mod, H, movefocus, l
bind = $mod, J, movefocus, d
bind = $mod, K, movefocus, u
bind = $mod, L, movefocus, r

# Move the focused window with the same, but add Shift
bind = $mod SHIFT, H, movewindow, l
bind = $mod SHIFT, J, movewindow, d
bind = $mod SHIFT, K, movewindow, u
bind = $mod SHIFT, L, movewindow, r

# Workspaces:
# Switch to workspace
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5
bind = $mod, 6, workspace, 6
bind = $mod, 7, workspace, 7
bind = $mod, 8, workspace, 8
bind = $mod, 9, workspace, 9
bind = $mod, 0, workspace, 10

bind = $mod, Tab, workspace, previous

# Move focused container to workspace
bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4
bind = $mod SHIFT, 5, movetoworkspace, 5
bind = $mod SHIFT, 6, movetoworkspace, 6
bind = $mod SHIFT, 7, movetoworkspace, 7
bind = $mod SHIFT, 8, movetoworkspace, 8
bind = $mod SHIFT, 9, movetoworkspace, 9
bind = $mod SHIFT, 0, movetoworkspace, 10

# Layout stuff:
# Horizontal and vertical splits
bind = $mod, B, splitratio, -0.1
bind = $mod, V, splitratio, 0.1

# Toggle the current focus between tiling and floating mode
bind = $mod SHIFT, SPACE, togglefloating

# Swap focus between the tiling area and the floating area
bind = $mod, SPACE, togglespecialworkspace

# Make the current focus fullscreen
bind = $mod, F, fullscreen

# Scratchpad:
# Move the currently focused window to the scratchpad
bind = $mod SHIFT, MINUS, movetoworkspacesilent, special
bind = $mod, MINUS, togglespecialworkspace

# Resizing containers:
bind = $mod, R, submap, resize

submap = resize
binde = , H, resizeactive, -10 0
binde = , J, resizeactive, 0 10
binde = , K, resizeactive, 0 -10
binde = , L, resizeactive, 10 0
bind = , Return, submap, reset
bind = , Escape, submap, reset
submap = reset

# Custom System controls:
# Volume and brightness controls
bindel = , XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +5% && pactl set-sink-mute @DEFAULT_SINK@ 0
bindel = , XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -5% && pactl set-sink-mute @DEFAULT_SINK@ 0
bindl = , XF86AudioMute, exec, pactl set-sink-mute @DEFAULT_SINK@ toggle
bindl = , XF86MonBrightnessUp, exec, brightnessctl set +5%
bindl = , XF86MonBrightnessDown, exec, brightnessctl set 5%-

# Screenshots
# Print for interactive screenshot and copy to clipboard
bind = , Print, exec, ~/bin/area-screenshot
# Ctrl+Print for window screenshot and copy to clipboard
bind = CONTROL, Print, exec, ~/bin/window-screenshot
# Mod+Print for full screenshot and save to file
bind = $mod, Print, exec, ~/bin/screen-screenshot ~/hdd/Pictures/Screenshots/$(date +%Y-%m-%d-%H-%M-%S).png
# Mod+Shift+c to save clipboard picture
bind = $mod SHIFT, C, exec, ~/bin/save-clipboard-picture

# Ctrl+Shift+Escape for htop in a floating window
bind = CONTROL SHIFT, Escape, exec, $term --class htop-keybind -e htop

# Change wallpaper
# bind = $mod SHIFT, B, exec, ~/bin/bgchange_wayland  # TODO: Fix script to use Hyprland/wallpaper manager (currently uses swaymsg)

# Window rules
windowrulev2 = float, class:^(org.telegram.desktop)$
windowrulev2 = center 1, class:^(org.telegram.desktop)$
windowrulev2 = size 380 504, class:^(org.telegram.desktop)$
windowrulev2 = float, class:^(htop-keybind)$
windowrulev2 = center 1, class:^(htop-keybind)$

### Idle configuration
# Requires hypridle to be installed and running
# Install: yay -S hypridle
# Start: systemctl --user enable --now hypridle.service
# Create ~/.config/hypr/hypridle.conf with:
# general {
#     lock_cmd = swaylock -f -c 000000
# }
#
# listener {
#     timeout = 900
#     on-timeout = swaylock -f -c 000000
# }
#
# listener {
#     timeout = 1200
#     on-timeout = hyprctl dispatch dpms off
#     on-resume = hyprctl dispatch dpms on
# }

### Environment variables
env = XCURSOR_SIZE, 24
env = XCURSOR_THEME, Adwaita

### Colors (Catppuccin-inspired)
$peach = 0xfffab387
$text = 0xffcdd6f4
$base = 0xff1e1e2e
$overlay0 = 0xff6c7086
$rosewater = 0xfff5e0dc
$mauve = 0xffcba6f7
$mantle = 0xff181825
